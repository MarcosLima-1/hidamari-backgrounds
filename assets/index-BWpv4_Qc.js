import{r as f,j as C,R as q,a as tt}from"./index-DS-5ozUU.js";const et=({children:M,fontSize:a="clamp(2rem, 8vw, 8rem)",fontWeight:h=900,fontFamily:e="inherit",color:m="#fff",enableHover:x=!0,baseIntensity:p=.18,hoverIntensity:k=.5})=>{const T=f.useRef(null);return f.useEffect(()=>{let n,i=!1;const t=T.current;return t?((async()=>{var Z;if((Z=document.fonts)!=null&&Z.ready&&await document.fonts.ready,i)return;const v=t.getContext("2d");if(!v)return;const X=e==="inherit"?window.getComputedStyle(t).fontFamily||"sans-serif":e,L=typeof a=="number"?`${a}px`:a;let y;if(typeof a=="number")y=a;else{const c=document.createElement("span");c.style.fontSize=a,document.body.appendChild(c);const r=window.getComputedStyle(c).fontSize;y=parseFloat(r),document.body.removeChild(c)}const B=q.Children.toArray(M).join(""),o=document.createElement("canvas"),s=o.getContext("2d");if(!s)return;s.font=`${h} ${L} ${X}`,s.textBaseline="alphabetic";const l=s.measureText(B),d=l.actualBoundingBoxLeft??0,g=l.actualBoundingBoxRight??l.width,w=l.actualBoundingBoxAscent??y,R=l.actualBoundingBoxDescent??y*.2,b=Math.ceil(d+g),F=Math.ceil(w+R),G=10,A=b+G;o.width=A,o.height=F;const O=G/2;s.font=`${h} ${L} ${X}`,s.textBaseline="alphabetic",s.fillStyle=m,s.fillText(B,O-d,w);const Y=50,$=0;t.width=A+Y*2,t.height=F+$*2,v.translate(Y,$);const W=Y+O,I=$,_=W+b,H=I+F;let j=!1;const D=30,J=()=>{if(i)return;v.clearRect(-30,-30,A+2*D,F+2*D);const c=j?k:p;for(let r=0;r<F;r++){const E=Math.floor(c*(Math.random()-.5)*D);v.drawImage(o,0,r,A,1,E,r,A,1)}n=window.requestAnimationFrame(J)};J();const K=(c,r)=>c>=W&&c<=_&&r>=I&&r<=H,P=c=>{if(!x)return;const r=t.getBoundingClientRect(),E=c.clientX-r.left,N=c.clientY-r.top;j=K(E,N)},Q=()=>{j=!1},U=c=>{if(!x)return;c.preventDefault();const r=t.getBoundingClientRect(),E=c.touches[0],N=E.clientX-r.left,z=E.clientY-r.top;j=K(N,z)},V=()=>{j=!1};x&&(t.addEventListener("mousemove",P),t.addEventListener("mouseleave",Q),t.addEventListener("touchmove",U,{passive:!1}),t.addEventListener("touchend",V));const S=()=>{window.cancelAnimationFrame(n),x&&(t.removeEventListener("mousemove",P),t.removeEventListener("mouseleave",Q),t.removeEventListener("touchmove",U),t.removeEventListener("touchend",V))};t.cleanupFuzzyText=S})(),()=>{i=!0,window.cancelAnimationFrame(n),t&&t.cleanupFuzzyText&&t.cleanupFuzzyText()}):void 0},[M,a,h,e,m,x,p,k]),C.jsx("canvas",{ref:T})},nt=({direction:M="right",speed:a=1,borderColor:h="#999",squareSize:e=40,hoverFillColor:m="#222"})=>{const x=f.useRef(null),p=f.useRef(null),k=f.useRef(0),T=f.useRef(0),n=f.useRef({x:0,y:0}),i=f.useRef(null);return f.useEffect(()=>{const t=x.current;if(!t)return;const u=t.getContext("2d"),v=()=>{t.width=t.offsetWidth,t.height=t.offsetHeight,k.current=Math.ceil(t.width/e)+1,T.current=Math.ceil(t.height/e)+1};window.addEventListener("resize",v),v();const X=()=>{if(!u)return;u.clearRect(0,0,t.width,t.height);const o=Math.floor(n.current.x/e)*e,s=Math.floor(n.current.y/e)*e;for(let d=o;d<t.width+e;d+=e)for(let g=s;g<t.height+e;g+=e){const w=d-n.current.x%e,R=g-n.current.y%e;i.current&&Math.floor((d-o)/e)===i.current.x&&Math.floor((g-s)/e)===i.current.y&&(u.fillStyle=m,u.fillRect(w,R,e,e)),u.strokeStyle=h,u.strokeRect(w,R,e,e)}const l=u.createRadialGradient(t.width/2,t.height/2,0,t.width/2,t.height/2,Math.sqrt(t.width**2+t.height**2)/2);l.addColorStop(0,"rgba(0, 0, 0, 0)"),l.addColorStop(1,"#060606"),u.fillStyle=l,u.fillRect(0,0,t.width,t.height)},L=()=>{const o=Math.max(a,.1);switch(M){case"right":n.current.x=(n.current.x-o+e)%e;break;case"left":n.current.x=(n.current.x+o+e)%e;break;case"up":n.current.y=(n.current.y+o+e)%e;break;case"down":n.current.y=(n.current.y-o+e)%e;break;case"diagonal":n.current.x=(n.current.x-o+e)%e,n.current.y=(n.current.y-o+e)%e;break}X(),p.current=requestAnimationFrame(L)},y=o=>{const s=t.getBoundingClientRect(),l=o.clientX-s.left,d=o.clientY-s.top,g=Math.floor(n.current.x/e)*e,w=Math.floor(n.current.y/e)*e,R=Math.floor((l+n.current.x-g)/e),b=Math.floor((d+n.current.y-w)/e);(!i.current||i.current.x!==R||i.current.y!==b)&&(i.current={x:R,y:b})},B=()=>{i.current=null};return t.addEventListener("mousemove",y),t.addEventListener("mouseleave",B),p.current=requestAnimationFrame(L),()=>{window.removeEventListener("resize",v),p.current&&cancelAnimationFrame(p.current),t.removeEventListener("mousemove",y),t.removeEventListener("mouseleave",B)}},[M,a,h,m,e]),C.jsx("canvas",{ref:x,className:"block h-full w-full border-none"})},ct=function(){const{borderColor:a,bgColor:h,fontSize:e,text:m}=tt.useSearch();return C.jsxs("section",{style:{backgroundColor:h},className:"h-svh w-full bg-black",children:[C.jsx(nt,{speed:.5,squareSize:40,direction:"diagonal",borderColor:a}),C.jsx("div",{className:"absolute top-1/2 left-1/2 z-20 -translate-x-1/2 -translate-y-1/2",children:m&&C.jsx(et,{fontSize:`${e}px`,children:m})})]})};export{ct as component};
